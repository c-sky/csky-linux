2015-08-05 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/kernel/entry.S:
		Fix bug: tlbinvalid or tlbmodified may occurred utlb,
			and the mapping isnot in jtlb.

2015-06-30 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/Kconfig:
	* arch/csky/ck6408evb/config.c:
	* arch/csky/ck6408evb/timer.c:
		Support CK6408evb hrtimer.

2015-06-11 Han weidong <weidong_han@c-sky.com>

	* arch/csky/ck6408evb/include/mach/cklcd.h:
	* arch/csky/ck6408evb/devices.c:
	* drivers/video/csky_fb.c:
		Fix: lcd driver.

2015-06-19 Han weidong <weidong_han@c-sky.com>

	* arch/csky/ck6408evb/include/mach/board.h:
	* arch/csky/ck6408evb/include/mach/cksdhc.h:
	* drivers/mmc/core/sd.c:
	* drivers/mmc/host/cskymci.c:
		Fix: sdhc driver.

2015-06-11 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/boot/compressed/head.S:
	* arch/csky/boot/compressed/misc.c:
	* arch/csky/boot/compressed/vmlinux.lds.in:
	* arch/csky/ck6408evb/Makefile.boot:
		Fix: If (S)DRAM base address is between 0x80000000 to 0xbfffffff,
		     we cannot use the tlb map in start code, just use mcr30 and mcr31...

2015-04-29 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/include/asm/io.h:
		Add ioread16 etc.

2015-04-20 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/mm/ioremap.c:
		Add ksyms: __ioremap_mode.

2015-04-13 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/kernel/csky_ksyms.c:
		Add ksyms: flush_dcache_page.

2015-03-01 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/configs/ck6408evb_ck610f_board_defconfig:
	* arch/csky/configs/ck6408evb_ck610f_qemu_defconfig:
	* arch/csky/configs/ck6408evb_ck810f_board_defconfig:
	* arch/csky/configs/ck6408evb_ck810f_qemu_defconfig:
		Add ck6408evb board and qemu defconfig.

2015-01-21 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/lib/memcpy_abiv1.S:
		Fix: address overlap condition.

2015-01-20 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/lib/Makefile:
	* arch/csky/lib/memcpy_abiv1.S:
		Optimize: abiv1 memcpy.
		If src or dest is misaligned, we piece together a word...

2015-01-20 zhang wenmeng <wenmeng_zhang@c-sky.com>

	* arch/csky/include/asm/delay.h:
		BogoMIPS: declt + bf should use 2 clcye.

2015-01-08 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/kernel/module.c:
		Relocate jsri, "jsri + nop" --> "lrw + jsr".

2015-01-04 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/include/asm/setup.h:
		Modify COMMAND_LINE_SIZE: 256 -> 1024.

2015-01-04 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/boot/compressed/head.S:
		Fix: jump from USEG to SSEG0 after enable mmu.

2014-12-28 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/include/asm/cacheflush.h:
		Fix: compile warning.

2014-11-30 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/boot/compressed/head.S:
		Fix: add alignment + stack.

2014-11-28 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/boot/compressed/Makefile:
	* arch/csky/boot/compressed/decompress.c:
	* arch/csky/boot/compressed/head.S:
	* arch/csky/boot/compressed/misc.c:
	* arch/csky/boot/compressed/vmlinux.lds.in:
		Support lzma decompression.

2014-11-28 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/Kconfig:
	* arch/csky/kernel/head.S:
		Add CK610 double data cache line config.

2014-11-24 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/mm/tlbv1.c:
		Old CK610M does not have tlb invalid index function.
		Changing ASID can flush utlb too.

2014-11-12 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/include/asm/ckmmuv1.h:
	* arch/csky/include/asm/ckmmuv2.h:
		dos2unix.

2014-11-12 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/include/asm/shmparam.h:
	* arch/csky/mm/mmap.c:
		Restore SHMLBA, for ltp case shmat01 crashed.

2014-10-15 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/include/asm/page.h:
		If cache alias, flush cache in copy_user_page.

2014-10-10 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/include/asm/io.h:
		optimize dma_cache_inv, dma_cache_wback, dma_cache_wback_inv.

2014-10-10 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/mm/fault.c:
		add '&', then '%0' and '%1' will use different registers.

2014-10-09 Zhang wenmeng <linfei_chen@c-sky.com>

	* arch/csky/mm/cachev1.c:
		CACHE: disable irq before flush cache which will prevent schedule.

2014-10-08 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/kernel/entry.S:
		for abiv2 compile.

2014-10-08 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/kernel/entry.S:
		Fix trap2 atomic operations.
		The "stw a1, (a2)" may produce tlbmodified exception, then may cause schedule.

2014-09-23 Zhang wenmeng <wenmeng_zhang@c-sky.com>

	* arch/csky/kernel/head.S
		MMU: bit 26 is invalid flush all.

2014-09-22 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/boot/compressed/head.S:
		if EntryLo's "C" bit is disabled, compression will be very slow.

2014-09-22 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/Kconfig:
	* arch/csky/boot/compressed/Makefile:
		add configuration of compression.

2014-09-22 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/include/asm/ckmmuv1.h:
	* arch/csky/include/asm/ckmmuv2.h:
	* arch/csky/mm/tlbv1.c:
	* arch/csky/mm/tlbv2.c:
		while tlb probe failed, the mappings maybe in utlb, we should invalid it.

2014-09-14 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/Kconfig:
	* arch/csky/include/asm/page.h:
	* arch/csky/include/asm/shmparam.h:
	* arch/csky/mm/cache.c:
		add config for cache size. cache alias if cache size >= 16KByte.
		if cache alias, flush cache in clear_user_page.

2014-09-01 Zhang wenmeng <wenmeng_zhang@c-sky.com>
	* arch/csky/include/asm/pgtable.h
		CACHE: add cache flush to pte_clear, while using hardrefill.

2014-08-13 Zhang wenmeng <wenmeng_zhang@c-sky.com>
	* arch/csky/kernel/head.S
	* arch/csky/kernel/process.c
	* arch/csky/kernel/head-nommu.S
	* arch/csky/kernel/entry.S
	* arch/csky/boot/compressed/head.S
		OPTIMIZE: change jsri to jbsr.

2014-08-11 Zhang wenmeng <wenmeng_zhang@c-sky.com>
	* arch/csky/kernel/head.S
		OPTIMIZE: change jsri to jmpi.

2014-08-07 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/include/asm/mmu_context.h:
	* arch/csky/include/asm/page-nommu.h:
	* arch/csky/include/asm/page.h:
	* arch/csky/kernel/entry.S:
	* arch/csky/kernel/vmlinux.lds.S:
	* arch/csky/mm/fault.c:
		optimize function: CONFIG_PHYSICAL_BASE_CHANGE.

2014-08-04 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/ck6408evb/timer.c:
		fix gettimeofday. tcn * (1000000 / HZ) maybe overflow.

2014-07-29 Chen linfei <linfei_chen@c-sky.com>

	* arch/csky/kernel/head.S:
		select cp15 first.

2014-07-02 Zhang wenmeng <wenmeng_zhang@c-sky.com>
	* arch/csky/include/asm/uaccess.h
		copy_to_user: bf --> br. a slip of the pen.

2014-06-26 Chen linfei <linfei_chen@c-sky.com>
	* arch/csky/include/asm/elf.h:
	* arch/csky/kernel/module.c:
		add relocate R_CSKY_PCRELJSR_IMM26BY2.

2014-06-26 Zhang wenmeng <wenmeng_zhang@c-sky.com>
	* arch/csky/kernel/setup.c
	* arch/csky/mm/cache.c
	* arch/csky/mm/highmem.c
	* arch/csky/mm/tlbv1.c
	* arch/csky/mm/tlbv2.c
		highmem: fix ck610 highmem support.

2014-06-09 Zhang wenmeng <wenmeng_zhang@c-sky.com>
	* arch/csky/include/asm/processor.h
		NOMMU: delete HAVE_ARCH_PICK_MMAP_LAYOUT

2014-06-04 Zhang wenmeng <wenmeng_zhang@c-sky.com>

	* arch/csky/Kconfig
	* arch/csky/include/asm/entry.h
	* arch/csky/include/asm/io.h
	* arch/csky/include/asm/page.h
	* arch/csky/include/asm/virtconvert.h
	* arch/csky/kernel/head.S
	* arch/csky/kernel/vmlinux.lds.S
	* arch/csky/mm/dma-mapping.c
	* arch/csky/mm/ioremap.c
		MMU: support cp15_cr30 and cp15_cr31 setting.

2014-05-30 Zhang wenmeng <wenmeng_zhang@c-sky.com>
	* arch/csky/boot/Makefile
	* arch/csky/boot/compressed/head.S
		boot: fix bootargs.

2014-05-22 Zhang wenmeng <wenmeng_zhang@c-sky.com>
	* arch/csky/include/asm/cache.h
	* arch/csky/kernel/head.S
	* arch/csky/mm/cachev2.c
	* arch/csky/mm/l2cache.c
		cache: change register number for compatibility.

2014-05-04 Chen linfei <linfei_chen@c-sky.com>
	* arch/csky/mm/tlbv1.c
	* arch/csky/mm/tlbv2.c
		highmem: tlb probe fix.

2014-04-24 Zhang wenmeng <wenmeng_zhang@c-sky.com>
	* arch/csky/kernel/vmlinux.lds.S
		ld script: beginnig of using the vmlinux's LMA.

2014-03-07 Zhang wenmeng <wenmeng_zhang@c-sky.com>
	* arch/csky/include/asm/uaccess.h
		optimal performance for copy_to_user/copy_from_user.

2014-03-06 Zhang wenmeng <wenmeng_zhang@c-sky.com>
	* arch/csky/mm/cachev1.c
		cache: avoid 610 hardware bug.

2013-06-14 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/asm-offsets.c:
	* arch/csky/kernel/process.c:
	* arch/csky/kernel/ptrace.c:
	* arch/csky/kernel/signal.c:
	* include/asm-csky/fpu.h:
	* include/asm-csky/ptrace.h:
	* include/asm-csky/processor.h:
	* include/asm-csky/sigcontext.h:
	* include/asm-csky/user.h:
	    optimize fpu embedded assemble code and add fcr reg in fpu context
	     for glibc.

2013-06-08 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/traps.c:
		some reg fcr of ck610 only R/W in super mode, so fix it.

2013-05-28 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/Makefile:
		Need not define UTS_SYSNAME for uname error in LTP test,
		 by default UTS_SYSNAME="Linux".  

2013-05-27 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/process.c:
		optimize function kernel_thread by reference arm/mips.

2013-05-27 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/entry.S:
	* arch/csky/kernel/vdso.c:
		get_tls use trap 3 in ck610, because it's difficult to use vdso.

2013-05-27 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/include/asm/futex.h:
		update file futex.h to fixup some bugs in libc test.

2013-05-27 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/signal.c:
		sigstack may NULL when pass flag SA_ONSTACK, so ignore it.

2013-05-27 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/entry.S:
		add syscall pselect6 and ppoll support.
		optimize code for trap3 exception.

2013-05-06 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/setup.c:
		Optimize /proc/cpuinfo for match get_hardware in android init.

2013-05-06 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/entry.S:
	* arch/csky/kernel/process.c:
	* arch/csky/kernel/vdso.c:
		Optimize ck610 get tls by use VDSO.

2013-04-15 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/include/asm/elf.h:
	* arch/csky/kernel/process.c:
		fix bug when GDB use coredump function.

2013-04-12 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/boot/Makefile:
		Otimize boot/Makefile.

2013-04-12 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/mm/dma-mapping.c:
	* arch/csky/include/asm/dma-mapping.h:
	* arch/csky/include/asm/sizes.h:
		add file asm/sizes.h and optimize dma-mapping function.

2013-04-11 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/BOARD/config.c:
	* arch/csky/BOARD/devices.c:
	* arch/csky/kernel/setup.c:
	* arch/csky/kernel/time.c:
	* arch/csky/include/asm/machdep.h:
		optimize API mach_time_init.	

2013-04-08 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/ck6408evb/Kconfig:
	* arch/csky/ck6408evb/config.c:
	* arch/csky/ck6408evb/devices.c:
	* arch/csky/ck6408evb/devices.h:
	* arch/csky/ck6408evb/include/mach/ck_iomap.h:
	* arch/csky/ck6408evb/include/mach/irqs.h:
		add platform trilobite v9-1 in board ck6408evb.

2013-03-22 Chen linfei <linfei_chen@c-sky.com>

	* driver/i2c/busses/i2c-ck6408.c:
	* arch/csky/ck6408evb/devices.c:
		optimize i2c driver.

2013-03-21 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/ck6408evb/include/mach/ckspi.h:
	* arch/csky/ck6408evb/config.c:
	* arch/csky/ck6408evb/device.c:
	* drivers/spi/spi_ck6408.c:
	    add csky spi driver.

2013-03-21 Hu junshan <junshan_hu@c-sky.com>

	* arch/csky/include/asm/cache.h:
		We use MACRO ARCH_SLAB_MINALIGN to let the stack pointer align
		with 8 for NOMMU's CPU.

2013-03-20 Zhang Wenmeng <wenmeng_zhang@c-sky.com>

	* include/asm/entry.h:
	* include/asm/mmu_context.h:
	* kernel/entry.S:
	* mm/fault.c:
		add ck610 mmu hard refill function.

2013-03-18 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/include/asm/cacheflush.h
	* arch/csky/include/asm/io.h:
	* arch/csky/mm/ioremap.c:
		fix compile error when config android pmem.

2013-03-18 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/boot/compressed/head.S:
		add MGU spuuort.

2013-03-18 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/include/asm/highmem.h:
	* arch/csky/mm/highmem.c:
		delete compile error for highmem.

2013-03-12 Chen Linfei <linfei_chen@c-sky.com>

	* driver/video/csky_fb.c:
		fix LCD driver bug, CSKY_LCD_SOURCE_SIZE register
		 only in DIOSCURI.

2013-03-12 Chen Linfei <linfei_chen@c-sky.com>

	* arch/csky/lib/checksum.c:
		fix bug of telnet(endian error).

2013-03-12 Chen Linfei <linfei_chen@c-sky.com>

	* arch/csky/include/asm/unistd.h:
	* arch/csky/kernel/entry.S:
		function sync_file_range use syscall sys_sync_file_rang2.

2013-03-12 Chen Linfei <linfei_chen@c-sky.com>

	* arch/csky/include/asm/uaccess.h:
		fix bug of function __puter_asm_64.

2013-03-12 Chen Linfei <linfei_chen@c-sky.com>

	* arch/csky/kernel/sys_csky.c:
	* arch/csky/kernel/entry.S:
		Since syscall sys_fadvise64_64 has loff_t stye params,
		 but loff_t is a 64 bit type we avoid a lot of ABI hassle
		 with a different argument ordering.

2013-03-12 Chen Linfei <linfei_chen@c-sky.com>

	* arch/csky/dioscuri/devices.c:
		fix new MAC driver bug.

2013-02-01 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/entry.S:
	* arch/csky/kernel/signal.c:
	* arch/csky/include/asm/unistd.h:
		optimize syscall sigreturn and rt_sigreturn.

2013-02-01 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/entry.S:
	* arch/csky/kernel/signal.c:
		Fix bug in LTP case(clone02), use r11 to judge restart syscall.

2013-02-01 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/include/asm/elf.h:
	* arch/csky/include/asm/mmu.h:
	* arch/csky/include/asm/mmu_context.h:
	* arch/csky/include/asm/processor.h:
	* arch/csky/kernel/Makefile:
	* arch/csky/kernel/signal.c:
	* arch/csky/mm/mmap.c:
	* arch/csky/include/asm/vdso.h:
	* arch/csky/kernel/vdso.c:
		add vdso support, which let sigreturn code not flush cache.
	
2013-01-29 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/signal.c:
		sig_setframe write syscall sigreturn need flush dcache and icache.
	
2013-01-29 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/include/asm/fpu.h:
		fix bug when vfp init.	

2013-01-25 Mao Han <han_mao@c-sky.com>

	* arch/csky/boot/compressed/head.S:
	* arch/csky/boot/compressed/Makefile:
	* arch/csky/boot/compressed/misc.c:
	* arch/csky/boot/compressed/piggy.S:
	* arch/csky/boot/compressed/vmlinux.lds.in:
	* arch/csky/boot/compressed/Makefile.debug:
	* arch/csky/ck6408evb/Makefile.boot:
	* arch/csky/ck6408evb/include/mach/uncompress.h:
	* arch/csky/dioscuri/Makefile.boot:
	* arch/csky/dioscuri/include/mach/uncompress.h:
		optimize zimage by reference arm.

2013-01-14 Zhang Wenmeng <wenmeng_zhang@c-sky.com>

	* arch/csky/include/asm/outercache.h:
	* arch/csky/mm/cachev2.c:
	* arch/csky/mm/l2cache.c:
	* arch/csky/Kconfig:
	* arch/csky/include/asm/cache.h:
	* arch/csky/include/asm/cacheflush.h:
	* arch/csky/kernel/head.S:
	* arch/csky/mm/Makefile:
		add ck810 cache line flush function.

2013-01-09 Chen Linfei <linfei_chen@c-sky.com>

	* driver/net/Makefile:
	* driver/net/Kconfig:
	* driver/net/cskymac.h:
	* driver/net/cskymac.c:
		add ck6408evb mac driver.

2013-01-09 Chen Linfei <linfei_chen@c-sky.com>

	* arch/csky/include/asm/prfl.h:
	* arch/csky/kernel/entry.S:
		move hardware profile regs context switch as a macro.

2013-01-09 Chen Linfei <linfei_chen@c-sky.com>

	* arch/csky/Kconfig:
	* arch/csky/include/asm/entry.h:
	* arch/csky/include/asm/fpu.h:
	* arch/csky/include/asm/processor.h:
	* arch/csky/include/asm/ptrace.h:
	* arch/csky/include/asm/regdef.h:
	* arch/csky/include/asm/sigcontext.h:
	* arch/csky/include/asm/system.h:
	* arch/csky/include/asm/user.h:
	* arch/csky/kernel/alignment.c:
	* arch/csky/kernel/asm-offsets.c:
	* arch/csky/kernel/entry.S:
	* arch/csky/kernel/process.c:
	* arch/csky/kernel/ptrace.c:
	* arch/csky/kernel/signal.c:
	* arch/csky/kernel/sys_csky.c:
	* arch/csky/kernel/traps.c:
		kernel use compiler's ABI macro and support VFP(for ck800).

2013-01-09 Chen Linfei <linfei_chen@c-sky.com>

	* arch/csky/kernel/signal.c:
		optimize signal handle.

2013-01-09 Chen Linfei <linfei_chen@c-sky.com>

	* arch/csky/include/asm/thread_info.h:
	* arch/csky/kernel/entry.S:
		optimize sig and sched flags by reference ARM and MIPS.

2013-01-03 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/ck6408evb/config.c:
	* arch/csky/dioscuri/config.c:
	* arch/csky/include/asm/cpu.h:
	* arch/csky/include/asm/machdep.h:
	* arch/csky/kernel/cpu-probe.c:
	* arch/csky/kernel/setup.c:
		optimize cpuinfo and cpu probe.

2013-01-03 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/entry.S:
		fixup compile bug when use hardware refill tlbmiss exception in ck810.

2012-12-28 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/include/asm/irqflags.h:
		add membarrier when lock irq operation, it may bring bug if not do.

2012-12-27 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/module.c:
		kernel module handle relocat R_CSKY_PCRELJSR_IMM11BY2.

2012-12-27 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/alignment.c:
		fixup alignment exception handle bug in ck610(because struct pt_regs 
		 changed). 

2012-12-27 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/Kconfig:
		optimize nommu config. 

2012-12-20 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/Kconfig:
	* arch/csky/include/asm/processor.h:
	* arch/csky/include/asm/traps.h:
	* arch/csky/include/asm/unistd.h:
	* arch/csky/include/asm/user.h:
	* arch/csky/kernel/asm-offsets.:
	* arch/csky/kernel/entry.S:
	* arch/csky/kernel/process.c:
	* arch/csky/kernel/sys_csky.c:
	* arch/csky/include/asm/prfl.h:
		add hardware profiling in some ck810.

2012-12-12 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/Kconfig:
	* arch/csky/include/asm/cache.h:
	* arch/csky/include/asm/cacheflush.h:
	* arch/csky/mm/cachev1.c:
		add ck610 cache line flush.

2012-12-12 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/entry.S:
	* arch/csky/kernel/traps.c:
		optimize tlbmiss exception handle.

2012-12-12 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/include/asm/processor.h:
	* arch/csky/include/asm/ptrace.h:
	* arch/csky/include/asm/user.h:
	* arch/csky/kernel/entry.S:
	* arch/csky/kernel/ptrace.c:
		optimize for gdbserver and strace..

2012-12-12 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/include/asm/pgtable.h:
		fix bug when page convert(page flags = IS_ZERO).

2012-12-12 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/entry.S:
	* arch/csky/kernel/sys_csky.c:
		1. Delete csky_pread/csky_pwrite but use sys_pread64/sys_pwrite64, 
		 for long long type endian format.
		2. let exception trap 2 as function kernel_cmpxchg.

2012-12-12 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/ck6408evb/devices.c:
	* arch/csky/dioscuri/devices.c:
		fb need init displays to fix bug: FBIOPUT_VSCREENINFO failed.

2012-12-12 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/Kconfig:
		add power managerment config.

2012-12-12 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/mm/tlbv1.c:
		fix bug in function local_flush_tlb_kernel_range, is bad use ASID and
		 bit G.

2012-12-12 Hu Junshan <junshan_hu@c-sky.com>

	* drivers/...:
		update csky's i2c, mmc, rtc, usb and lcd driver

2012-10-29 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/entry.S:
	* arch/csky/kernel/process.c:
	* arch/csky/kernel/process.c:
	* arch/csky/kernel/sys_csky.c:
		support tls reg(r31) in ck810 and change syscall clone from
		 csky_clone(struct pt_regs *regs) to 
		 csky_clone(unsigned long clone_flags, unsigned long newsp,
		           int __user *parent_tidptr, int __user *child_tidptr,
		           int tls_val, struct pt_regs *regs)

2012-10-26 Chen Linfei <linfei_chen@c-sky.com>

	* arch/csky/ck6408evb/devices.c:
	* arch/csky/ck6408evb/config.c:
	* arch/csky/ck6408evb/devices.h:
		add board ck6408evb's rtc and i2c platform resource.

2012-10-26 Chen Linfei <linfei_chen@c-sky.com>

	* drivers/input/keyboard/Kconfig:
	* drivers/input/keyboard/Makefile:
	* drivers/input/keyboard/ck6408-keypad.c:
		add csky i2c keyboard driver.

2012-10-26 Chen Linfei <linfei_chen@c-sky.com>

	* drivers/i2c/busses/Kconfig:
	* drivers/i2c/busses/Makefile:
	* drivers/i2c/busses/i2c-ck6408.c:
		add csky i2c driver.

2012-10-26 Chen Linfei <linfei_chen@c-sky.com>

	* drivers/rtc/Kconfig:
	* drivers/rtc/Makefile:
	* drivers/rtc/rtc-ck6408.c:
		add csky rtc driver.

2012-10-21 Hu Junshan <junshan_hu@c-sky.com>

	* drivers/mtd/nand/Kconfig:
	* drivers/mtd/nand/Makefile:
	* drivers/mtd/nand/csky_nand.c:
		add nand flash driver for csky's test soc chips.

2012-09-26 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/kernel/aligment.c:
		delete ck610 compile error.

2012-09-14 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/configs/ck6408evb_abiv2_defconfig:
		add abiv2 defconfig

2012-09-12 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/include/asm/elf.h:
	* arch/csky/kernel/module.c:
		module add new relocation handle.

2012-09-12 Hu Junshan <junshan_hu@c-sky.com>

	* drivers/usb/Kconfig:
	* drivers/usb/host/ohci-hcd.c:
	* drivers/usb/host/ohci-csky.c:
		add csky usb host driver.

2012-09-12 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/include/asm/virtconvert.h:
		fix bug when DMA function call page_to_phys.

2012-09-12 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/include/asm/system.h:
		delete bug but need optimize by reference arch ARM and MIPS.

2012-09-12 Hu Junshan <junshan_hu@c-sky.com>

	* arch/csky/Kconfig:
	* arch/csky/kernel/alignment.c:
		add kernel mode to handle missalign exception but now it's 
		not full and need to be optimized.

2012-08-24 Chen Linfei <linfei_chen@c-sky.com>

	* arch/csky/Kconfig:
	* arch/csky/ck6408evb/gpio.c:
	* arch/csky/ck6408evb/Makefile:
	* arch/csky/include/asm/gpio.h:
	* arch/csky/ck6408evb/config.c:
	* arch/csky/ck6408evb/devices.c:
	* arch/csky/ck6408evb/irq.c:
	* arch/csky/ck6408evb/include/mach/ckgpio.h:
		add gpio lib.

2012-06-26 Zhou Feng <feng_zhou@c-sky.com>

	* arch/csky/Kconfig:
		add abiv2 config and relate mmu with cpu.

2012-06-26 Zhou Feng <feng_zhou@c-sky.com>
	
	* arch/csky/include/asm/regdef.h:
		add this file for register software rename to suport abiv2.

2012-06-26 Zhou Feng <feng_zhou@c-sky.com>

	* arch/csky/include/asm/ptrace.h:
	* arch/csky/include/asm/sigcontext.h:
	struct adjust: pt_regs, switch_stack, sigcontext;  
	regs = {pc,orig_a0,a0,a1,a2,a3,regs[10],r15,exregs[16],rhi,rlo;};                         abi v1:  r2,r3,r4,r5,r6.r7; sp = r0, syscallid = r1;
		  abi v2:  r0,r1,r2,r3;       sp = r14,syscallid = r7; 

2012-06-26 Zhou Feng <feng_zhou@c-sky.com>

	* arch/csky/include/asm/entry.h:
		1 add    Macro PT_REGS_ADJUST  rx.
		2 modify Macro SAVE_ALL, RESTORE_ALL.
		3 modify Macro SAVE_SWITCH_STACK, RESTORE_SWITCH_STACK.

2012-06-26 Zhou Feng <feng_zhou@c-sky.com>

	* arch/csky/include/asm/processor.h:
		modify function rdusp and wrusp.

2012-06-26 Zhou Feng <feng_zhou@c-sky.com>

	* arch/csky/include/asm/elf.h:
	* arch/csky/include/asm/system.h:
	* arch/csky/include/asm/thread_info.h:
		modify these because of register software rename 
			to support abiv2. 

2012-06-26 Zhou Feng <feng_zhou@c-sky.com>

	* arch/csky/kernel/entry.S:
	      1 modify these because of register software rename 
			to support abiv2.
	      2 move sys_execve from process.c to this file.
	      3 major changes to Entry(system_call) due to 
		parameter from (abiv1) 6 to (abiv2) 4.
	      4 use Macro PT_REGS_ADJUST  rx,such as sys_fork.

2012-06-26 Zhou Feng <feng_zhou@c-sky.com>

	* arch/csky/kernel/head.S:
	* arch/csky/kernel/head-nommu.S:
	* arch/csky/kernel/fiq.c:
	      1 modify these because of register software rename 
			to support abiv2.
	      2 instruction decne abiv2 have been removed, replace it.

2012-06-26 Zhou Feng <feng_zhou@c-sky.com>

	* arch/csky/kernel/signal.c:
	      1 modify these because of register software rename 
			to support abiv2.
	      2 fuction do_signal return value chang to regs->a0.
	      3 modify fuction setup_frame due to instrction movi have changed. 

2012-06-26 Zhou Feng <feng_zhou@c-sky.com>

	* arch/csky/kernel/ptrace.c:
	* arch/csky/kernel/process.c:
	* arch/csky/kernel/sys_csky.c:
	* arch/csky/kernel/traps.c:
	* arch/csky/kernel/asm-offsets.c:	
		modify these because of register software rename 
			to support abiv2.	

********************************************
	
2012-04-06 Hu junshan <junshan_hu@c-sky.com>
	* all code:
		Porting the arch csky form linux2.6.32 to linux3.0.
		This is the first version of csky linux-3.0.

********************************************

2012-01-16 Hu junshan <junshan_hu@c-sky.com>
	* drivers/net/cskymac.c:
	* drivers/serial/csky_uart.c:
	* drivers/usb/host/ohci-csky.c:
	* drivers/video/csky_fb.c:
	* drivers/serial/Kconfig:
		chane ckcore to csky.

2012-01-16 Hu junshan <junshan_hu@c-sky.com>
	* drivers/char/Kconfig:
	* drivers/char/Makefile:
	* drivers/char/csky_serial.c:
	* drivers/char/csky_serial.h:
		Delete csky_serial.c driver(base on linux2.4), and use driver 
		    csky_uart.c.
2012-01-16 Hu junshan <junshan_hu@c-sky.com>
	We change arch name frome ckcore to csky after this version.

********************************************

2012-01-15 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/signal.c:
	* arch/ckcore/include/asm/fpu.h:
		fix embedded asemble code bug.

2011-12-14 Hu junshan <junshan_hu@c-sky.com>
	* drivers/video/csky_fb.c:
		Fix csky fb driver bug.

2011-12-14 Hu junshan <junshan_hu@c-sky.com>
	* drivers/usb/host/ohci.h:
	* drivers/usb/host/ohci-csky.c:
	* drivers/usb/host/ohci-hcd.c:
	* drivers/usb/Kconfig:
		add csky usb host driver. 

2011-12-14 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/uaccess.h:
		Fix bug when call get_user like get_user(x, p++);  maybe add 2.

2011-11-24 Hu junshan <junshan_hu@c-sky.com>
	* drivers/mtd/nand/Kconfig:
	* drivers/mtd/nand/Makefile:
	* drivers/mtd/nand/csky_nand.c:
		Add csky nand driver.

2011-11-24 Hu junshan <junshan_hu@c-sky.com>	
	* drivers/mtd/chips/cfi_cmdset_0002.c:
	* drivers/mtd/chips/jedec_probe.c:
		Add norflash chip sst39vf6401b support.
		more info please reference:
		  http://blog.tianya.cn/blogger/post_show.asp?BlogID=803354&PostID=19231483
		  http://www.pubbs.net/200906/kernel/36263-add-support-for-the-sst-39vf3202-39vf6401b-and-39vf6402b-flash-chips.html

2011-11-24 Hu junshan <junshan_hu@c-sky.com>
	* drivers/mtd/maps/Kconfig:
	* drivers/mtd/maps/Makefile:
	* drivers/mtd/maps/csky_norflash.c:
		Add csky norflash driver.
	
2011-11-24 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/Makefile:
	* arch/ckcore/kernel/traps.c:
	* arch/ckcore/kernel/alignment.c:
	* arch/ckcore/Kconfig:
		Add file alignment.c and move the aligment exception handler 
		from trap.c to it, it's control by macro 
		CONFIG_SOFT_HANDMISSALIGN.

2011-11-10 Hu junshan <junshan_hu@c-sky.com>
	* drivers/serial/Kconfig:
	* drivers/serial/Makefile:
	* drivers/serial/csky_uart.c:
		add  csky uart driver.

2011-11-10 Hu junshan <junshan_hu@c-sky.com>
	* drivers/video/csky_fb.h:
	* drivers/video/csky_fb.c:
	* drivers/video/Makefile:
	* drivers/video/Kconfig:
		add  csky fb driver.

2011-11-10 Hu junshan <junshan_hu@c-sky.com>
	* ipc/shm.c:
		Change to support shm for nommu.
	
2011-11-10 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/setup.c:
		add framebuffer console support.

2011-11-10 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/mm/mmap.c:
	* arch/ckcore/include/asm/pgtable-nommu.h:
		add function get_fb_unmaped_area for nommu CPU.

2011-11-10 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/ckm5208/irq.c:
	* arch/ckcore/ck6408evb/irq.c:
		add init call set_irq_handler(i, handle_level_irq); for all irq
		 to support SHARED IRQ.

2011-11-10 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/ck6408evb/devices.c:
	* arch/ckcore/ck6408evb/config.c:
		change to support uart and LCD drivers.

2011-10-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/mm/nommu.c:
		the function setup_memory need setup memory region when bootload
		 or commandline not setup memory region.

2011-10-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/ckm5208/: 
	* arch/ckcore/configs/ckm5208_defconfig:
	* arch/ckcore/Makefile:
	* arch/ckcore/Kconfig:
		add board ckm5208.

2011-10-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/bitops.h:
	* arch/ckcore/include/asm/atomic.h:
	* arch/ckcore/include/asm/system.h:
	* arch/ckcore/include/asm/irqflags.h:
		move the macros loca_irq_xxx in file asm/irqflags.h and delete 
		the macro sti, cli, save_flags ande soon on.

2011-10-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/entry.S:
	* arch/ckcore/include/asm/sigcontext.h:
	* arch/ckcore/include/asm/ucontext.h:
	* arch/ckcore/kernel/signal.c:
		optimize the signal handle by reference arch arm and not use 
		struct switch_struct.

2011-10-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/entry.S:
	* arch/ckcore/include/asm/entry.h:
	* arch/ckcore/include/asm/ptrace.h:
	* arch/ckcore/kernel/process.c:
		optimize the task context and redefine struct switch_struct 
		because the task switch need not save/restore destroyed register
		 like r2~r7.

2011-10-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/entry.h:
	* arch/ckcore/include/asm/ptrace.h:
	* arch/ckcore/kernel/traps.c:
	* arch/ckcore/kernel/ptrace.c:
	* arch/ckcore/kernel/asm-offsets.c:
		csky v2 need save/restore reg hi/lo when handle interrupt and
		 syscall, so change struct pt_regs.

2011-10-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/entry.S:
	* arch/ckcore/include/asm/tlb.h:
	* arch/ckcore/include/asm/pgtable.h:
	* arch/ckcore/include/asm/pgalloc.h:
	* arch/ckcore/include/asm/mmu_context.h:
	* arch/ckcore/include/asm/cacheflush.h:
	* arch/ckcore/mm/cachev1.c:
	* arch/ckcore/mm/fault.c:
	* arch/ckcore/mm/mmu.c:
		ck810's tlbmiss hardrefill need fill phy address, and OS write 
		pgd/pte need clear cache.

2011-09-23 Hu junshan <junshan_hu@c-sky.com>
	* drivers/net/cskymac.c:
		function xx_xmit need unlock before return.

2011-09-23 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/Makefile:
		compile kernel code  need not produce DSP and float instruction.

2011-09-23 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/uaccess.h:
	* arch/ckcore/lib/usercopy.c:
		Driver compile with module may produce section __ex_table. 
		This section mast align by 4 byte, so add ".align   2".

2011-09-01 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/user.h:
		adjust the struct user, because uClibc need use it.

2011-09-01 Hu junshan <junshan_hu@c-sky.com>
	* rch/ckcore/include/asm/pgtable.h:
	* arch/ckcore/include/asm/pgtable-nommu.h:
	* arch/ckcore/include/asm/pgtable-bits.h:
		MMUV2.0's tlb flags in PTE local at bit 0~6.

2011-09-01 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/entry.h:
		support CSKY MMU version 2 by macro CONFIG_CPU_MMU_V1/2.

2011-09-01 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/ckmmuv2.h:
	* arch/ckcore/include/asm/ckmmuv1.h:
	* arch/ckcore/include/asm/ck610mmu.h:
	* arch/ckcore/include/asm/ck510mmu.h:
		rm file file ck510mmu.h/ck610mmu.h and add file 
		 ckmmuv1.h/ckmmuv2.h to support all CSKY MMU version.		

2011-09-01 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/head.S:
		ck810 has dsp BTB/BTH, so CPU init need invalid and open it.
		optimize mmu operation.

2011-09-01 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/entry.S:
	* arch/ckcore/kernel/process.c:
		ck810 has dsp instruction, so need save/restore hi/lo register.

2011-09-01 Hu junshan <junshan_hu@c-sky.com>
	 * arch/ckcore/kernel/signal.c:
		CSKY V2 need adjust epc by 4, because trap instruction is 32bit.

2011-09-01 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/traps.c:
		delete function write_mmu_context, because not used.

2011-09-01 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/mm/tlbv1.c:
	* arch/ckcore/mm/Attic/tlbv2.c:
	* arch/ckcore/mm/Makefile:
		add file tlbv2.c to support MMU V2.0.

2011-09-01 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/ck6408evb/config.c:
	* arch/ckcore/ck6408evb/irq.c:
		Add function ckcore_get_auto_irqno to get irq number when use 
		auto interrupt.

2011-09-01 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/mmu_context.h:
	* arch/ckcore/mm/init.c:
	* arch/ckcore/mm/fault.c:
		when config CONFIG_MMU_HARD_REFILL, kernel not use valrable 
		pgd_current but register CP15_29.
	* arch/ckcore/Kconfig:
		Add hard refill tlb miss configuration.

2011-07-19 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/cpu.h:
	* arch/ckcore/Makefile:
	* arch/ckcore/Kconfig:
		rename CPU ck801 as ck803.

2011-07-14 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/configs/ck6408evb_defconfig:
	* ckcore/configs/ck5a6-3c_defconfig:
	* arch/ckcore/configs/ckcore_defconfig:
		Rename ckcore_defconfig as ck6408evb_defconfig for MMU CPU demo
		 configuration and add ck5a6-3c_defconfig for NOMMU CPU demo
		 configuration.

2011-07-14 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/cacheflush.h:
		For nommu cpu, the function flush_icache_range need fluash all 
		 cache, because load flat file as data and will made some 
		 instruction in data cache.

2011-07-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/setup.c:
		Handle  bootload passed  parms(struct tag).
		Delete bug(cat /proc/cpuinfo).
		Optimize function setup_arch.

2011-07-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/mm/Attic/nommu.c:
	* arch/ckcore/mm/Attic/mmu.c:
	* arch/ckcore/mm/init.c:
		Partition some memory init operation such as paging_init from 
		init.c to mmu.c or nommu.c. 

2011-07-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/vmlinux.lds.S:
	* arch/ckcore/kernel/head.S:
	* arch/ckcore/kernel/Attic/head-nommu.S:
		Change to support bootload pass parms.

2011-07-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/Attic/cpu-probe.c:
	* arch/ckcore/include/asm/cpu.h:
		change according by C-SKY Product ID SPEC Rev3.3.

2011-07-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/mm/Attic/tlbv1.c:
	* arch/ckcore/include/asm/setup.h:
	* arch/ckcore/include/asm/bootinfo.h:
		Move all definiation from file bootinfo.h to setup.h by 
		    according ARCH ARM.

2011-07-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/mm/Attic/highmem.c:
	* arch/ckcore/include/asm/pgtable.h:
	* arch/ckcore/include/asm/kmap_types.h:
	* arch/ckcore/include/asm/Attic/fixmap.h:
	* arch/ckcore/include/asm/Attic/highmem.h:
		Add or change this file to support higmen.

2011-07-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/ckcore.h:
		Delete unused MACRO and add some nommu config MACRO. 

2011-07-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/machdep.h:
	* arch/ckcore/ck6408evb/config.c:
	* arch/ckcore/ck6408evb/Kconfig:
		Kernel command line pass by bootload or by config, so need not
		 do in board init. And the board API config_BSP not need  parms.

2011-07-11 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/Kconfig:
		add macro CONFIG_CMDLINE for kernel commamd line and some nommu 
		configuration, such as consecutive memory region for malloc.

2011-07-04 Dou shaobin <shaobin_dou@c-sky.com>
	Delete the Macros of PAGE_SIZE_16KB and PAGE_SIZEZ_64KB.	
	Rename file c-ck610.c to cachev1.c, and file tlb-ck610.c to tlbv1.c. 
	Added the files page-nommu.h and cpu-probe.c
	Added the function of probing CPU type automatically.
	Added support for the architecture of ck801.
	Added support for the architecture of nommu.

2011-04-20 Hu junshan <junshan_hu@c-sky.com>
	* ckcore/kernel/vmlinux.lds.S:
		Let the linker file support between gcc3.2 and gcc4.5.

2011-04-20 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/process.c:
	* arch/ckcore/lib/memcpy.c:
	* arch/ckcore/lib/memset.c:
	* arch/ckcore/include/asm/uaccess_mm.h:
		Delete compile error for csky-gcc4.5. Because the new compiler's
		 syntax is more strict.

2010-12-17 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/pgtable_mm.h:
		Add define pgprot_noncached to delete pretreatment error.
		Please see buzilla:BUG 286 for more info.

2010-11-24 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/bitops_mm.h:
		the assemble code of function set_bit as follow:
			ld  r6, (r14, 0)
			......
			mfcr    r7, psr
			psrclr  ie
			bseti   r6, 2
			st  r6, (r14, 0)
			mtcr    r7, psr
		obviously, the operation is not atomic. So we change it by add
		     key word volatile to let it atomic. We also change other
		     function which not atomic. After change the code is like
		     that:
		    static inline void set_bit(int nr, volatile void * addr)
		    {
		      volatile unsigned int *a = (volatile unsigned int *) addr;
		      ......
		      save_flags(flags); cli();
		      *a |= mask;
		      restore_flags(flags);
		    }
		
2010-11-10 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/Makefile:
		Add parameter BJCOPYFLAGS and GZFLAGS to make right image file.

2010-11-04 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/ck6408evb/time.c:
	* arch/ckcore/ck6408evb/include/mach/ckuart.h:
	* arch/ckcore/ck6408evb/include/mach/cktimer.h:
	* arch/ckcore/ck6408evb/include/mach/ckpic.h:
		Let base address and irqnumber define from ck_iomap.h to irqs.h.

2010-11-04 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/ck6408evb/include/mach/irqs.h:
	* arch/ckcore/ck6408evb/include/mach/ck_iomap.h:
		Add all base address and irq number of peripheral devices.

2010-11-04 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/ck6408evb/include/mach/fb.h:
	* arch/ckcore/ck6408evb/include/mach/cklcd.h:
		Add head file for LCD driver.

2010-11-04 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/ck6408evb/include/mach/cknand.h:
	* arch/ckcore/ck6408evb/include/mach/board.h:
		Add head file for Nand Flash driver.

2010-11-04 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/ck6408evb/config.c:
	* arch/ckcore/ck6408evb/devices.h:
	* arch/ckcore/ck6408evb/devices.c:
		Add usb host and LCD driver.

2010-11-04 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/delay_mm.h: 
		The origined function of udelay is error.

2010-11-04 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/io_mm.h:
	* arch/ckcore/include/asm/dma-mapping.h:
	* arch/ckcore/mm/dma-mapping.c:
		Implement all dma interface by reference arch-MIPS.

2010-10-22 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/processor_mm.h:
		We will set ptregs->r7=0 in function start_thread, because
		     __uClibc_main need this reg to distinguish between the 
		    argument "rtdl" is passed form kernel or linker.

2010-09-21 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/mm/dma-mapping.c:
		The implementation of the "dma_alloc_coherent()" function is 
		    buggy:  It never returns the correct uncached address. 
		    Because the type of variable ret is unsigned int *, it will
		    calculate addr addition by multiply 4 in UNCAC_ADDR(ret) and
		    get error result. The right change is define ret as type
		    void *.

2010-09-03 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/mmu_context.h:
		We need to flush all cache to avoid problem of 16k cache.

2010-09-03 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/mm/cache.c:
	* arch/ckcore/include/asm/cacheflush_mm.h:
	* arch/ckcore/include/asm/pgtable_mm.h:
		Add __update_cache and flush all cache to avoid problem of 16k
		     cache alians.

2010-09-03 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/tlb.h:
		The function tlb_start_vma will be called when free 
		    phy-page(use syscall munmap), we need flush cache in this
		    file. If we don't flush cache, it will lead to cache 
		    unalians when cache >=16k.

2010-08-05 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/sys_ckcore.c:
	* arch/ckcore/include/asm/shmparam.h:
		Map virtual address in thrread space need 16k aligan to avoid 
		    cache probem(if cache>16k, ...).

2010-08-02 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/checksum_mm.h: 
		Support little endian and use assemble code to optimize
		     performance.
	* arch/ckcore/lib/checksum.c:
		Support little endian.

2010-08-02 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/mm/ioremap.c:
		The arg 1 of pfn_pte is pfn not phy-address.

2010-08-02 Hu junshan <junshan_hu@c-sky.com> 
	* arch/ckcore/kernel/ints.c:
	* arch/ckcore/kernel/fiq.c:
	* arch/ckcore/kernel/entry.S:
		Support auto interrupt handle.
	* arch/ckcore/kernel/setup.c:
	* arch/ckcore/include/asm/machdep_mm.h:
		Add machine API mach_get_auto_fiqno and mach_get_auto_irqno to
		     get IRQ/FIQ number when use auto interrupt.	

2010-08-02 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/fiq.c:
	* arch/ckcore/kernel/entry.S:
	* arch/ckcore/include/asm/irq_mm.h:
	* arch/ckcore/include/asm/fiq.h:
	* arch/ckcore/ck6408evb/include/mach/irqs.h:
	* arch/ckcore/ck6408evb/include/mach/ckuart.h:
	* arch/ckcore/ck6408evb/timer.c:
	* arch/ckcore/ck6408evb/irq.c:
		According to CPU, the IRQ number start from 32, but according to
		     SOC, the IRQ number start from 0. Because the
		     driver-developer need only to know SOC, we change some to
		     let the developer can understand the right IRQ number. So
		     the IRQ number need not to add offset 32.

2010-08-02 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/boot/install.sh:
	* arch/ckcore/boot/Makefile:
	* arch/ckcore/Makefile:
		Use this strips to produce binary image file: Image/zImage/uImage.

2010-07-28 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/ck610mmu.h:
		The tlb entry numbers of CPU CK610 is 128. 
		
2010-07-28 Hu junshan <junshan_hu@c-sky.com>
	* drivers/net/cskymac.c:
	* drivers/char/csky_serial.c:
		Let the driver support little endian format.
	* drivers/char/ckuart.h:
		Move this file to arch/ckcore/ck6408evb/include/mach.

2010-07-28 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/unaligned.h:
	* arch/ckcore/include/asm/stat.h:
	* arch/ckcore/include/asm/elf.h:
	* arch/ckcore/include/asm/byteorder.h:
		Let the kernel support little endian format.

2010-07-28 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/unistd.h:
	* arch/ckcore/kernel/sys_ckcore.c:
	* arch/ckcore/kernel/entry.S:
		Use trap 3 to get TLS and add a syscall sys_set_thread_area to
		     set TLS.

2010-07-28 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/thread_info_mm.h:
	* arch/ckcore/kernel/process.c:
	* arch/ckcore/kernel/asm-offset.c:
		Add a member in sttuct thread_info to support TLS.

2010-07-28 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/vmlinux.ls.S:
	* arch/ckcore/lib/math-64bits.h:
	* arch/ckcore/Makefile:
	* arch/ckcore/Kconfig:
		Add config option of CPU-endian select. 

2010-04-21 Hu junshan <junshan_hu@c-sky.com>
	* drivers/mtd/maps/csky_norflash.c:
		Optimize the function init_csky_map add the originally code will
		    lead to kernel dump when probe flash fail.

2010-04-21 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/ck6408evb/config.c: 
		Add macro #ifdef CONFIG_CPU_USE_FIQ to eliminate compile error,
		     if not config FIQ.    
	
2010-04-20 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/fpu.h:
		will bring a error "Unexpected register 'r13' for 'cprcr/cpwcr'"
		    when  compile file arch/ckcore/kernel/setup.c. So we use 
		    "=b(r1)" for the embedded assemble code to eliminate this
		     error

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/ck6408evb/irq.c:
		Unique vector numbers for fast vectored interrupt requests and
		    fast vectored interrupts Number are 64-95.

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/ck6408evb/fiq.c:
		This file define some board cupport function for fiq handler.	

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/traps_mm.h:
		Change define VEC_XXX to VEC_USER and it maybe used in fiq 
		    handler. 

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/machdep_mm.h:
		Add a machine interface --mach_init_FIQ for fiq handler.

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/fiq.h:
	* arch/ckcore/kernel/fiq.c:
		Add fiq handler for c-sky cpu.

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/setup.c:
	* arch/ckcore/include/asm/fpu.h:
		Add FPU init function.		

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/entry.S:
		Add FPU exception and fast interrupt handle. And also add FPU 
		and DSP register switch in function resume bcause thread switch
		 need save and restore these context.	

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/system_mm.h:
		Before resume, we must be confirm the FPU isn't peoduce 
		    exception. So we add a function _is_fpu_busying and called
		    by function switch_to. 

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/processor_mm.h:
		Define FPU context in thread_struct and let user thread select
		    FPU in function of start_thread when define 
		    CONFIG_CPU_HAS_FPU.

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/ucontext.h:
	* arch/ckcore/include/asm/sigcontext.h:
	* arch/ckcore/kernel/signal.c:
		Add FPU context save and retore in signal handle. 
		Let third arg of user register signal-function pointer to 
		    ucontext and it origal point NULL.

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/traps_mm.h:
	* arch/ckcore/kernel/traps.c:
		Add FPU exception handle.

2010-03-08 Hu junshan <junshan_hu@c-sky.com> 
	* arch/ckcore/include/asm/ptrace.h:
	* arch/ckcore/kernel/ptrace.c:
		Add some interface and let gdbserver to look up FPU and DSP
		     regster. 

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/user.h:
	* arch/ckcore/kernel/process.c:
		Add FPU and DSP context save in function copy_thread. And also
		 implement kernel interface of dump_fpu.

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/asm-offset.c:
		Add offsets of FPU and DSP context in the thread struct.

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/configs:
		Update it.

2010-03-08 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/Kconfig:
		Add config option about FPU, DSP enhanced instruction and Fast 
		    interrupt support.	
	
2009-12-27 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/uaccess_mm.h:
		Change the handle of function __put_user_asm_64 when date type 
		    is 64bits

2009-12-10 Ye Yun <yun_ye@c-sky.com>
	* include/linux/dirent.h:
		 Add dirent&dirent64 to make this head file compatible 
			to APP for linux2.4

2009-12-09 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/setup.c:
	* arch/ckcore/include/asm/machdep_mm.h:
		Modify some machine API and delete some of it.

2009-12-07 Li Chunqiang <chunqiang_li@c-sky.com>
	* include/asm-generic/page.h:
		Fix the problem that __attribute_const__ is not defined, when 
		    building uClibc-0.9.30.

2009-12-01 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/machdep_mm.h:
		Change the function of get and set real time clock from 
		    arch_getod to  mach_hwclk.
	* arch/ckcore/ck6408evb/timer.c:
		Add an interface to get or set real time clock.
	* arch/ckcore/ck6408evb/config.c:
		Add an interface to get or set real time clock.
	* arch/ckcore/kernel/time.c:
		Add an interface to get real time clock.
	* arch/ckcore/kernel/setup.c:
		Change the function of get and set real time clock from 
		    arch_getod to mach_hwclk.

2009-12-01 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/vmlinux.lds.S:
	* arch/ckcore/kernel/head.S:
		Change the start code form text section to __HEAD section and it
		     will delete compile warning.
	* arch/ckcore/include/asm/page_mm.h:
		Change PAGE_SIZE with the style of UL to delete compile warning.
	* kernel/time/ntp.c:
	* block/cfq-iosched.c:
	* fs/dcache.c:
		Add return value after call BUG() to delete compile warning. 
	* lib/vsprintf.c:
	* fs/proc/page.c:
	* fs/libfs.c:
	* net/sunrpc/svcauth_unix.c:
	* block/as-iosched.c:
		Add some variable initial to delete compile warning.

2009-11-20 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/ck6408evb/Kconfig:
		Add a menu to config commamd "rdinit" to specify the init
		     programe in the fs.
	* arch/ckcore/ck6408evb/config.c:
		Add a commamd rdinit to specify the init programe in the fs.

2009-11-18 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/head.S:
		If we  want to jump right from physical address to virtual 
		    address in start code, we need to fill up page table and map
		    physical address to the same virtual address before we
		    enable MMU. So change it to correspond with diferent RAM
		     base address.

2009-11-18 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/setup.c:
		Don't evaluate valure to saved_command_line, because it's not
		    initialed and well bring in bug when use boodload to load 
		    kernel. The variable saved_command_line is alloced mem at
		    the function setup_command_line, so we need not evaluate
		    valure in function setup_arch.

2009-11-15 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/time.c:
		Use new seqlock read_seqbegin and read_seqretry to replace 
		    read_seqbegin_irqsave and read_seqretry_irqsave. Because 
		    when call function of mach_gettimeoffset, system will bring
		     timer interrupt. 
		If we used old seqlock, ststem well not hander the interrupt to
		     update wall-time and result in obtain error time.

2009-11-15 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/setup.c:
		Optimize the code style, change the MACRO CONFIG_CPU_CK640 to 
		     CONFIG_CKCORE_MMU and delete some unused function rely on
		     machine.

2009-11-15 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/pgtable-bits.h:
		Change the MACRO CONFIG_CPU_CK640 to CONFIG_CKCORE_MMU.
	* arch/ckcore/include/asm/mmu_context.h:
		Change the MACRO CONFIG_CPU_CK660 to CONFIG_CPU_MMU_CP. 
	* arch/ckcore/include/asm/entry.h:
		Optimize the code style and change the MACRO CONFIG_CPU_CK660 t 
		  CONFIG_CPU_MMU_CP.
	* arch/ckcore/include/asm/ckcore.h:
		Optimize the code style and change the MACRO CONFIG_CPU_CK640 t 
		  CONFIG_CKCORE_MMU.

2009-11-15 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/mm/Makefile:
		Change the MACRO CONFIG_CPU_CK640 to CONFIG_CPU_MMU.
	* arch/ckcore/mm/tlb=ck610.c:
		Change the MACRO CONFIG_CPU_CK660 to CONFIG_CPU_MMU_CP.

2009-11-15 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/Kconfig:
		Optmize the config menu for our processor.

2009-11-15 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/Makefile:
		Optmize this file and delete unused codes.

2009-11-13 Hu junshan <junshan_hu@c-sky.com>
	* drivers/char/csky_serial:
		Change file name from ck1000evb_serial.c to csky_serial.c and 
		  ck1000evb_serial.h to csky_serial.h. 
		Optmize the code style.
		Change macro ck1000evb-->csky, CK1000EVB-->CSKY.
	* drivers/char/ckuart.h:
		Optmize the code style.
	* drivers/char/Makefile:
		Change obj filename.
	* drivers/char/Kconfig:
		Change config menu.

2009-11-13 Hu junshan <junshan_hu@c-sky.com>
	* drivers/mtd/maps/csky_norflsah.c:
		Change filename from ckcore_norflash.c to csky_norflash.c. Add 
		    norflash address, size and buswidth config entry.
	* drivers/mtd/maps/Kconfig:
		Change obj-filename from ckcore_norflash.o to csky_norflash.o.
	* drivers/mtd/maps/Kconfig:
		Add nor flash address and size config entry.

2009-11-13 Ye Yun <yun_ye@c-sky.com>
	* arch/ckcore/kernel/traps.c:
		In trap_c and buserr_c, replace send_sig with force_sig.
		Improve functione show_registers.

2009-11-13 Ye Yun <yun_ye@c-sky.com>
	* arch/ckcore/kernel/head.S:
	* arch/ckcore/kernel/entry.S:
		In entry.h, Add assemble macros, used to switch coprocessor 
		 to MMU, Read and Write MMU registers. So, here use them 
		 instead of two colections of codes for MMU coperation 
		 in many places.
	* arch/ckcore/include/entry_mm.h:
		Add assemble macros, used to switch coprocessor to MMU, 
			Read and Write MMU registers.

2009-11-12 Ye Yun <yun_ye@c-sky.com>
	* drivers/net/Kconfig:
		Correct CSKYMAC depending, CKCORE --> CK6408EVB.

2009-11-04 Ye Yun <yun_ye@c-sky.com>
	* arch/ckcore/mm/init.c:
		Correct variable totalram_pages from type static to extern, 
			that is because in mm/page_alloc.c has already defined: 
			EXPORT_SYMBOL(totalram_pages), which is just the one we 
			wished to use in this file.

2009-11-03 jiang jianyong <jianyong_jiang@c-sky.com>
	* arch/ckcore/include/asm/ptrace.h:
		exchange the value of PT_SR and PT_PC
	* arch/ckcore/kernel/trap.c:
		modify the handle of single step and breakpoint in trap_c 
	* arch/ckcore/kernel/ptrace.c:
		implement ptrace under the struct of ckcore
	* arch/ckcore/kernel/entry.S:
		get rid of the handle of do_delay_trace


2009-11-03 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/setup.c:
		The arg[1] in function reserve_bootmem need a phyaddress, so we
		 change it to deal with kernel bug when config other RAM base 
		 address then 0x0.

2009-11-02 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/Kconfig:
		Add rootfs autoconfig. Now, suport initrd, jffs2 and nfs, you 
		can choose one of them to be your rootfs.
		The config-menu	like :
			Platform dependent setup
				-->Root File System and Boot Paramete Seting
					-->initrd
					-->jffs2
					-->nfs

2009-11-02 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/setup.c:
		Add initrd rootfs autoconfig, it depends on macro 
		CONFIG_INITRD_START_ADDR and CONFIG_INITRD_SIZE.	

2009-11-02 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/ck6408evb/config.c:
		Move comdline-setup from setup.c to config.c.

2009-11-02 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcorec/kernel/vmlinux.lds.S:
		Support config SDRAM base address. The base address rely on 
		 the macro of CONFIG_RAM_BASE:
			. = 0x80000000 + CONFIG_RAM_BASE;

2009-11-02 Hu junshan <junshan_hu@c-sky.com>
	* fs/jffs2/erase.c :
		Deal ewith the message of"jffs2_scan_eraseblock(): Magic bitmask
		 0x1985 not found at 0xXXXXXXXX: 0x2003 instead" when use jffs2
		 file system. It is a bug of GCC and we do sample change.

2009-11-02 Ye Yun <yun_ye@c-sky.com>
	* arch/ckcore/mm/dma-mapping.c:
		Realize routine dma_alloc_coherent and dma_free_coherent, 
			but they are not validated, they maybe validated by USB 
			driver in the future.
	* arch/ckcore/mm/tlb-ck610.c:
		1. Add func show_jtlb_table, it is used to print all the jtlbs;
		2. In func __update_tlb, delete line "write_mmu_entryhi(pid)" 
			in the end.

2009-11-02 Ye Yun <yun_ye@c-sky.com>
	* drivers/net/cskymac.c:
		1. In interrupt routine, clear ERR bits after handle errors;
		2. Add statics when tx error hanpens.

2009-10-29 Ye Yun <yun_ye@c-sky.com>
	* arch/ckcore/lib/checksum.c:
		The old checksum has bug, replace it , it works ,so do it.

2009-10-27 Ye Yun <yun_ye@c-sky.com>
	* drivers/net/cskymac.c:
		In func ckymac_tx: move line "skb= dp->tx_skbs[elem];" beforer. 
		 Or, skb being used before evaluated. It is quite serious a BUG.

2009-10-27 Ye Yun <yun_ye@c-sky.com>
	* arch/ckcore/kernel/signal.c:
		Complete func push_cache, which is called by 
		 setup_frame/setup_rt_frame after filling the sig frame in 
		 user stack with sys_sigreturn codes, to avoid codes only 
		 writed in dcache rather than memory, and CPU reads right 
		 instructions from the memory.

2009-10-23 Ye Yun <yun_ye@c-sky.com>
	* driver/net/cskymac.c:
		1. Add netif_start_queue(dev) in func cskymac_open; 
			add netif_stop_queue(dev) in func cskymac_close.
		2. In cskymac_ops, add func cskymac_get_stats, remove 
			func cksymac_set_macaddr
		3. In cskymac_ether_init: Remove cskymac_stop() and 
			replace kfree(dev) with free_netdev(dev), the later 
			also done in cksymac_cleanup.
		4. Replace func parameter cskymac* with net_device* 
			in all funcs if could, expcept in cskymac_cleanup.
		5. Remove routines below: cskymac_phyr_read, cskymac_phyr_write,
			try_next_permutation, cskymac_timer.
		6. Correct parameter of request_irq & free_irq:dp --> dev.
			#define ARCH_PFN_OFFSET 	PFN_UP(PHY_OFFSET)
			#define PHY_OFFSET		CK_RAM_BASE

2009-10-22 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/page_mm.h :
		Add 2 macro to deal with kernel error when change RAM base 
		 phy-address.

2009-10-22 Hu junshan <junshan_hu@c-sky.com>
	* drivers/mtd/maps/ckcore_norflash.c:
		Add the file to support ckcore norflash access. This file 
		 contain all need codes and you can change about hardware.
	* drivers/mtd/maps/Makefile:
		Add ckcore norflash access support:
			obj-$(CONFIG_MTD_CKCORE_NORFLASH)+= ckcore_norflash.o
	* drivers/mtd/maps/Kconfig:
		Add ckcore norflash access support:
			config MTD_CKCORE_NORFLASH
			tristate "Map driver for ckcore evb norflash"
			...

2009-10-22 Ye Yun <yun_ye@c-sky.com>
	* arch/ckcore/include/asm/page_mm.h:
		Change macro name with part of UNCAC to UNCACHE.

2009-10-22 Ye Yun <yun_ye@c-sky.com>
	* driver/net/cskymac.h:
		Add macro:
			TXBD_ERR_BITS   0x10f and
			RXBD_ERR_BITS   0xff
		for tx and rx BD error judge.
	* driver/net/cskymac.c:
		1. When init rings, map rx_skb->data to uncachable VM:
			L247:dp->rx_skbs[i]->data = UNCACHE_ADDR(skb->data);
		2. Remove func skymac_begin_auto_negotiation and 
			 cskymac_get_stats they are no use.
		3. Big change for mac interrupt routine, new way:
			Return type become irqreturn_t, del third parameter;
			Int tx and tx err merge to the same routine;  rx, rx err
			and busy merge to the same routine;
	 		So, cskymac_rx and cskymac_tx routine quite different.
		4. Routine cskymac_start_xmit add clear_dcache_all() to make 
			coherent between data cache and memory.

2009-10-22 Ye Yun <yun_ye@c-sky.com>
	* arch/ckcore/include/asm/socket.h:
		1 Undefine macro ARCH_HAS_SOCKET_TYPES, so use the generic 
			sock_type.
		2 Correct most of the macro to linux2.4 form.
		3 Add macros:
			#define SO_LINGER	13
			/* To add :#define SO_REUSEPORT 15 */
			#define SO_PASSCRED	16
			#define SO_PEERCRED	17
		  Delete macros:
			#define SOCK_TYPE_MASK 0xf
			#define SOCK_CLOEXEC	O_CLOEXEC
			#define SOCK_NONBLOCK	O_NONBLOCK
	
2009-10-22 Ye Yun <yun_ye@c-sky.com>
	* driver/net/cskymac.c:
		1 Displace dev->priv with netdev_priv(dev).
		2 In func cksymac_rx, replace eth_copy_and_sum with 
			skb_copy_to_linear_data.
		3 In func cskymac_ether_init:
	    	    init_ethrdev --> alloc_etherdev;
		    del SET_MODULE_OWNER(dev);
		    replace netdev ops evaluating with struct dev->netdev_ops=
		  	&cskymac_ops, and cskymac_ops define&evaluate just
			before func cskymac_ether_init;
		    ether_setup(dev) --> register_netdev(dev);
		4 In func cskymac_open:
		    the third parameter of request_irq change to IRQF_DISABLED. 

2009-10-22 Ye Yun <yun_ye@c-sky.com>
	* drivers/net/Kconfig:
		Add CSKYMAC config option under if NET_ETHERNET
	* drivers/net/Makefile:
		Add line: obj-$(CONFIG_CSKYMAC) += cskymac.oRXBD_ERR_BITS   0xff

2009-10-20 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/cacheflush_mm.h:
		Optimize the function about cache flush.

2009-10-20 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/trap.c:
		Let align exception to send SIGBUS signal.	

2009-10-20 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/elf.h:
		Add ckcore relocation fiags such as 
			#define R_CKCORE_32                 1
			#define R_CKCORE_NONE               0

2009-10-20 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/module.h:
		Change it to sustain module load.

2009-10-20 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/module.c:
		Deal witch module load of ckcore. We perfect the function of 
		apply_relocate, apply_relocate_add and soon on.

2009-10-20 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/ckcore_ksyms.c:
		Add some export symbole for module load.

2009-10-20 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/Makefile:
		Add a object to sustain module load.

2009-10-20 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/lib/checksum.c:
		Add 3 export symbole.

2009-10-20 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/mm/init.c:
		Add a export symbole.
	
2009-10-20 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/mm/dma-maping.c:
		Add return valure infunction dma_map_single, dma_map_page and 
		dma_mapping_error to delete compile warring.

2009-9-23 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/entry.S:
		1 Rather than keep a global, we dedicate a register r0 to get
		     current. So delete the variable _current_task and need not 
		     keeping it.
		2 Also, optimize the method of getting current->thread_info,
		     like below:
			mov     r9, r0
			bmaski  r10, THREADSIZE_MASK_BIT
			andn    r9, r10

2009-9-23 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/head.S:
	* arch/ckcore/kernel/setup.c:
		Rather than keep a global, we dedicate a register r0 to get 
		    current. So delete the variable _current_task and need not
		    keeping it.

2009-9-23 Ye Yun <yun_ye@c-sky.com>
	* arch/ckcore/include/asm/pgtable_mm.h:
		Define Macro PMD_SHIFT 22 instead of (2*PAGE_SHIFT-PTE_T_LOG2).
	* arch/ckcore/include/asm/bitops_mm.h:
		Optimize function ffz, use ckcore instructions to implement it.

2009-9-23 Ye Yun <yun_ye@c-sky.com>
	* arch/ckcore/include/asm/ck610mmu.h:
		correct each mmu control fuctions, use register "b" instead of
		     "r" in case of confilction with r5.

2009-9-22 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/ (all source file):
		Optimize the codes style. 

2009-9-22 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/ (asm-offset.c):
		Change the offset of thread_info in task_struct because the 
		    thread_struct has no filed info and task_struct.stack point
		     to the current struct thread_info.

2009-9-22 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/include/asm/processor_mm.h (L102 -109):
		Delete unused filed-----"struct thread_info info" in struct of 
		thread_struct.

2009-9-22 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/ints.c (init_IRQ):
		Add section attribute "__init" on this function.
	* arch/ckcore/ck6408evb/config.c (config_BSP):
		Add section attribute "__init" on this function.

2009-9-18 Hu junshan <junshan_hu@c-sky.com>
	* arch/ckcore/kernel/process.c (default_idle): 
		Schedule has bug when config kernel preemption: the idle thread
		   will output bug information to terminal. So correct the 
		   function of default_idle and let CPU enter wait mode.

2009-9-18 Hu junshan <junshan_hu@c-sky.com>
	* drivers/char/ck1000evb_serial.c (receive_chars): 
		Revise the function of receive_chars() when deal with the 
		    receive status is overrun.

2009-9-17 Hu junshan <junshan_hu@c-sky.com>
	* drivers/char/Kconfig (L124 - 168): 
		Deal with warring when use command "make defconfig".
